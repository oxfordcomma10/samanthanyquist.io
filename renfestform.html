<!DOCTYPE html>
<html>

<head>
	<title>Ren fest form</title>
  <style type="text/css">
  label{
    text-align: right;
    width: 10%;
  }
  </style>
</head>

<body>
    <p style=display:none id='debug' style=color:White>DEBUG ON</p>
	<legend>Renaissance Festival</legend>
	*Just fill out the check marks for the days you are available to go to, leave unwanted ones empty*
	<fieldset>
		<form id="renfest">
				Ren Fest Availability: <br>
                    ($23/person)<br>
					<input type="checkbox"
					id="1"
					value="1"
					name="rf1"> Saturday 9/4<br>
				<input type="checkbox"
					id="2"
					value="2"
					name="rf2"> Sunday 9/5<br>
                <input type="checkbox"
					id="3"
					value="3"
					name="rf3"> Monday 9/6<br>
                <input type="checkbox"
					id="4"
					value="4"
					name="rf4"> Saturday 9/11 (Football)<br>
                <input type="checkbox"
					id="5"
					value="5"
					name="rf5"> Sunday 9/12<br>
                <input type="checkbox"
					id="6"
					value="6"
					name="rf6"> Saturday 9/18 (Football)<br>
                <input type="checkbox"
					id="7"
					value="7"
					name="rf7"> Sunday 9/19<br>
				<input type="checkbox"
					id="8"
					value="8"
					name="rf8"> Saturday 9/25 (Football)<br>
                <input type="checkbox"
					id="9"
					value="9"
					name="rf9"> Sunday 9/26<br>
                <input type="checkbox"
					id="10"
					value="10"
					name="rf10"> Saturday 10/1<br>
                <input type="checkbox"
					id="11"
					value="11"
					name="rf11"> Sunday 10/2<br>
                <input type="checkbox"
					id="12"
					value="12"
					name="rf12"> Monday 10/3<br>
				<br>
    <button id="submit_but" type="button" onclick="first_submit()">Submit<button/>
  </form>
</fieldset>
      <fieldset>
		<form id="renfest2" style="display:none">
            Please rank your chosen availability starting from 1 being your first choice and so on.
            <br>
        <label id = "1.2.2" for="1.2" style="display:none">Saturday 9/4</label>
        <input type="text"
          style="display:none"
          size="1"
					id="1.2"
					name="rf1.2">
        <br>
        <label id="2.2.2" for="2.2" style="display:none">Sunday 9/5</label>
				<input type="text"
          style="display:none"
          size="1"
					id="2.2"
					name="sf2.2"> 
        <br>
        <label id="3.2.2" for="3.2" style="display:none">Monday 9/6</label>
        <input type="text"
          style="display:none"
          size="1"
			id="3.2"
					name="sf3.2"> 
        <br>
        <label id="4.2.2" for="4.2" style="display:none">Saturday 9/11 (Football)</label>
        <input type="text"
            style="display:none"
            size="1"
			id="4.2"
			name="rf4.2"> 
        <br>
        <label id="5.2.2" for="5.2" style="display:none">Sunday 9/12</label>
        <input type="text"
          style="display:none"
          size="1"
					id="5.2"
					name="sf5.2"> 
        <br>
        <label id="6.2.2" for= "6.2" style="display:none">Saturday 9/18 (Football)</label>
        <input type="text"
          style="display:none"
          size="1"
					id="6.2"
					name="sf6.2"> 
        <br>
        <label id="7.2.2" for="7.2" style="display:none">Sunday 9/19</label>
        <input type="text"
          style="display:none"
          size="1"
					id="7.2"
					name="sf7.2"> 
        <br>
        <label id="8.2.2" for="8.2" style="display:none">Saturday 9/25 (Football)</label>
        <input type="text"
          style="display:none"
          size="1"
					id="8.2"
					name="sf8.2"> 
        <br>
        <label id="9.2.2" for="9.2" style="display:none"> Sunday 9/26</label>
        <input type="text"
          style="display:none"
          size="1"
					id="9.2"
					name="sf9.2"> 
        <br>
        <label id="10.2.2" for="10.2" style="display:none">Saturday 10/1</label>
        <input type="text"
          style="display:none"
          size="1"
					id="10.2"
					name="sf10.2"> 
        <br>
        <label id="11.2.2" for="11.2" style="display:none">Sunday 10/2</label>
        <input type="text"
          style="display:none"
          size="1"
					id="11.2"
					name="sf11.2"> 
        <br>
        <label id="12.2.2" for="12.2" style="display:none">Monday 10/3</label>
        <input type="text"
          style="display:none"
          size="1"
					id="12.2"
					name="sf12.2"> 
        <br>
      <label id = "name" for="name">Your Name:</label>
      <input type="text"
        id ="name"
        name = "user">
<br>
      <button id="submit_but2" type="button" onclick="second_submit()">Submit<button/>        
  </form>
</fieldset>

</body>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

<script>
  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  var firebaseConfig = {
    apiKey: "AIzaSyA84vauBhYX2QeG1KlTOz5Ru-_6N5PMqno",
    authDomain: "fallactivitiessammy.firebaseapp.com",
    projectId: "fallactivitiessammy",
    storageBucket: "fallactivitiessammy.appspot.com",
    messagingSenderId: "927107743428",
    appId: "1:927107743428:web:4ec43156ed80e241519391",
    measurementId: "G-D3BVFQBZJ5"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  firebase.analytics();

  var push_to_firebase = function(data){
        alert("Thanks for sending a message. I'll try and get back to you as soon as possible.")
        var db = firebase.firestore();
        let data_dict = {
          name: data["name"],
          sep4: data['1.2'],
          sep5: data['2.2'],
          sep6: data['3.2'],
          sep11: data["4.2"],
          sep12: data["5.2"],
          sep18: data["6.2"],
          sep19: data["7.2"],
          sep25: data['8.2'],
          sep26: data['9.2'],
          oct1: data['10.2'],
          oct2: data["11.2"],
          oct3: data["12.2"]
        }
        db.collection("renfest").document(data["name"]).set(data_dict);
  }
  function first_submit(){
    var debug = document.getElementById("debug");
    var renfest = document.getElementById("renfest");
    var renfest2 = document.getElementById("renfest2");
    renfest.style.display = "none";
    renfest2.style.display="block";
    const checkren = [];
    //const color_array = ["Red", "Orange", "Yellow", "Green", "Blue", "Purple", "Black", "Brown", "Gray", "DarkKhaki", "DarkSeaGreen", "Maroon"]
    const date_array = ["1", "2","3","4","5","6","7","8","9","10","11","12"]
    //debug.style.display="block"
    for (var j = 0; j < date_array.length; j++){
        var checkBox = document.getElementById(date_array[j]);
        if (checkBox.checked == true){
            checkren.push(checkBox.value);
        }
        //debug.style.color = color_array[j]
    }  
    for (var i = 0; i < checkren.length; i ++){
        var checking = checkren[i] + ".2";
        var second = document.getElementById(checking);
        var name_text = document.getElementById(checking+".2");
        name_text.style.display = "inline-block";
        second.style.display = "inline-block";
    }
  }
  function second_submit(){
    var data = {};
    var renfest2 = document.getElementById("renfest2");
    renfest2.style.display="none";
    for (var k = 1.2; k < 13.2; k+=1){
        var ranking = document.getElementById(k.toString());
        if (ranking.style.display == "none"){
            data[ranking] = "X";
        }
        else {
            data[ranking] = ranking.value;
        }
    }
    var user_name = document.getElementById("name");
    data["name"] = user_name.value;

    push_to_firebase(data);
    window.location.href = "minnorchyesno.html";
  }
</script>

</html>